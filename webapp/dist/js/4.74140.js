webpackJsonp([4],{"1027":function(t,e,o){var a=o(1028);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,o(1002).default)("681410a5",a,!0,{})},"1028":function(t,e,o){(t.exports=o(1001)(!1)).push([t.i,".computer-room[data-v-23d3b1e6]{height:100%}.button-container[data-v-23d3b1e6]{position:absolute;right:17px;top:8px}",""])},"1029":function(t,e,o){var a=o(1030);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,o(1002).default)("106809a4",a,!0,{})},"1030":function(t,e,o){(t.exports=o(1001)(!1)).push([t.i,".computer-room[data-v-e51eb160]{height:100%}",""])},"1031":function(t,e,o){var a=o(1032);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,o(1002).default)("2769d262",a,!0,{})},"1032":function(t,e,o){(t.exports=o(1001)(!1)).push([t.i,".card-container[data-v-6c4d3332]{display:flex;flex-flow:row nowrap;justify-content:space-between}.card-container .card[data-v-6c4d3332]{width:30%;display:inline-block}.icon-style[data-v-6c4d3332]{font-size:3rem;color:#2d8cf0}",""])},"1082":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{"value":!0});var a={"name":"","data":function(){return{"modal":!1,"formValidate":{"selfBuiltMachineRoomNum":"","trusteeshipRoomNum":"","cloudServiceNum":"","id":""},"ruleValidate":{"selfBuiltMachineRoomNum":[{"required":!0,"pattern":/^\d+$/,"message":"请输入自建机房个数（必须数值类型）","trigger":"blur"}],"trusteeshipRoomNum":[{"required":!0,"pattern":/^\d+$/,"message":"请输入托管机房个数（必须数值类型）","trigger":"blur"}],"cloudServiceNum":[{"required":!0,"pattern":/^\d+$/,"message":"请输入托管云主机个数（必须数值类型）","trigger":"blur"}]}}},"methods":{"handleSubmit":function(t){var e=this;this.$refs[t].validate(function(t){t&&e.$httpt.post("machineRoomController.do?saveOrUpdateMachineRoom",e.formValidate).then(function(t){t.data.success?(e.$Notice.success({"title":"保存成功!"}),e.modal=!1,e.$bus.$emit("updateComputerRoomInfo")):e.$Notice.error({"title":"保存失败!"})})})},"handleReset":function(t){this.$refs[t].resetFields()},"ok":function(){this.modal=!1},"cancel":function(){this.modal=!1}},"mounted":function(){var e=this;this.$bus.$on("showUpdateComputerRoom",function(t){e.modal=!0,Object.assign(e.formValidate,t)})}},r={"render":function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Modal",{"attrs":{"title":"机房信息维护"},"on":{"on-ok":e.ok,"on-cancel":e.cancel},"model":{"value":e.modal,"callback":function(t){e.modal=t},"expression":"modal"}},[o("div",{"staticClass":"computer-room"},[o("Form",{"ref":"formValidate","attrs":{"model":e.formValidate,"rules":e.ruleValidate,"label-width":100}},[o("FormItem",{"attrs":{"label":"自建机房","prop":"selfBuiltMachineRoomNum"}},[o("Input",{"attrs":{"placeholder":"自建机房个数"},"model":{"value":e.formValidate.selfBuiltMachineRoomNum,"callback":function(t){e.$set(e.formValidate,"selfBuiltMachineRoomNum",t)},"expression":"formValidate.selfBuiltMachineRoomNum"}})],1),e._v(" "),o("FormItem",{"attrs":{"label":"托管机房","prop":"trusteeshipRoomNum"}},[o("Input",{"attrs":{"placeholder":"托管机房个数"},"model":{"value":e.formValidate.trusteeshipRoomNum,"callback":function(t){e.$set(e.formValidate,"trusteeshipRoomNum",t)},"expression":"formValidate.trusteeshipRoomNum"}})],1),e._v(" "),o("FormItem",{"attrs":{"label":"租用云主机","prop":"cloudServiceNum"}},[o("Input",{"attrs":{"placeholder":"租用云主机个数"},"model":{"value":e.formValidate.cloudServiceNum,"callback":function(t){e.$set(e.formValidate,"cloudServiceNum",t)},"expression":"formValidate.cloudServiceNum"}})],1),e._v(" "),o("FormItem",[o("Button",{"attrs":{"type":"primary"},"on":{"click":function(t){e.handleSubmit("formValidate")}}},[e._v("保存")]),e._v(" "),o("Button",{"staticStyle":{"margin-left":"8px"},"attrs":{"type":"ghost"},"on":{"click":function(t){e.handleReset("formValidate")}}},[e._v("重置")])],1)],1)],1)])},"staticRenderFns":[]};var n=o(3)(a,r,!1,function(t){o(1029)},"data-v-e51eb160",null).exports,i={"name":"","props":{"computerRooms":Array},"data":function(){return{"isShowLoading":!0,"isShowPie":!1,"modal":!1,"department":"","arr":[],"otherInfo":{}}},"methods":{"closeModal":function(){this.modal=!1}},"mounted":function(){var o=this;this.$bus.$on("ComputerRoomOtherTip",function(e){o.modal=!0,o.department=e,o.computerRooms.forEach(function(t){t.department===e&&(o.otherInfo.computerRoomArea=t.temp3,o.otherInfo.cloudService=t.temp5,o.otherInfo.trustComputerRoom=t.temp4)})})}},s={"render":function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("Modal",{"attrs":{"width":"60%"},"model":{"value":e.modal,"callback":function(t){e.modal=t},"expression":"modal"}},[o("p",{"staticStyle":{"text-align":"left"},"attrs":{"slot":"header"},"slot":"header"},[o("Icon",{"staticStyle":{"color":"#39f","font-size":"1rem"},"attrs":{"type":"ios-home-outline"}}),e._v(" "),o("span",[e._v(e._s(e.department)+"机房统计")])],1),e._v(" "),o("div",[o("section",{"staticClass":"card-container"},[o("Card",{"staticClass":"card"},[o("div",{"staticStyle":{"text-align":"center"}},[o("Icon",{"staticClass":"icon-style","staticStyle":{"color":"#f90"},"attrs":{"type":"map"}}),e._v(" "),o("h3",[o("span",[e._v("机房面积："+e._s(e.otherInfo.computerRoomArea))])])],1)]),e._v(" "),o("Card",{"staticClass":"card"},[o("div",{"staticStyle":{"text-align":"center"}},[o("Icon",{"staticClass":"icon-style","attrs":{"type":"pricetags"}}),e._v(" "),o("h3",[o("span",[e._v("托管机房："+e._s(e.otherInfo.trustComputerRoom))])])],1)]),e._v(" "),o("Card",{"staticClass":"card"},[o("div",{"staticStyle":{"text-align":"center"}},[o("Icon",{"staticClass":"icon-style","staticStyle":{"color":"#19BE6B"},"attrs":{"type":"android-cloud-outline"}}),e._v(" "),o("h3",[o("span",[e._v("租云服务："+e._s(e.otherInfo.cloudService))])])],1)])],1)]),e._v(" "),o("div",{"attrs":{"slot":"footer"},"slot":"footer"},[o("Button",{"attrs":{"type":"primary","long":""},"on":{"click":e.closeModal}},[e._v("关闭")])],1)])},"staticRenderFns":[]};var l={"name":"","data":function(){var o=this;return{"allInfo":[],"allComputerRoomInfo":[],"columns":[{"title":"ID","key":"id"},{"title":"部门名称","key":"department","width":"200","render":function(t,e){return t("div",{"style":{"cursor":"pointer"},"props":{"title":"hello"},"on":{"click":function(){o.$bus.$emit("ComputerRoomOtherTip",e.row.department)}}},[t("Icon",{"props":{"type":"ios-home-outline"},"style":{"marginRight":"1rem","color":"#2D8CF0","fontSize":"1rem"}}),t("strong",{"style":{"color":"#2D8CF0"}},e.row.department)])}},{"title":"自建机房","key":"selfBuiltMachineRoomNum"},{"title":"托管机房","key":"trusteeshipRoomNum"},{"title":"租用云主机","key":"cloudServiceNum"},{"title":"是否有信息科","key":"temp1"},{"title":"机房面积（平米）","key":"temp3"},{"title":"托管机房说明","key":"temp4"},{"title":"租云服务","key":"temp5"},{"title":"操作","key":"action","width":150,"align":"center","render":function(t,e){return t("div",[t("Button",{"props":{"type":"primary","size":"small"},"style":{"marginRight":"5px"},"on":{"click":function(){o.$bus.$emit("showUpdateComputerRoom",e.row)}}},"修改")])}}],"computerRooms":[],"pageSize":10,"start":1,"totalCount":0,"searchName":"","department":"","type":""}},"computed":{"autoCompleteData":function(){var t=this.$store.state.czCloudInfo.czCloudInfo;if(!(t instanceof Array))return Object.keys(t)}},"watch":{"searchName":function(t,e){""===t&&(this.department="",this.getComputerRoomInfo())}},"components":{"ComputerRoomModal":n,"ComputerRoomOtherTip":o(3)(i,s,!1,function(t){o(1031)},"data-v-6c4d3332",null).exports},"methods":{"search":function(){this.start=1,this.department=this.searchName,this.getComputerRoomInfo()},"changePage":function(t){this.start=t,this.getComputerRoomInfo()},"changePageSize":function(t){this.pageSize=t,this.start=1,this.getComputerRoomInfo()},"getComputerRoomInfo":function(){var o=this;this.$httpt.get("machineRoomController.do?getCzMachineRooms&start="+this.start+"&pageSize="+this.pageSize+"&department="+this.department+"&type="+this.type).then(function(t){var e=t.data;e.success?(o.computerRooms=e.data.list,o.totalCount=e.data.totalCount):o.$Notice.error({"title":"获取机房信息失败"})})},"filterMethod":function(t,e){if(""!==t)return-1!==e.indexOf(t)},"onSelect":function(t){this.department=t,this.getComputerRoomInfo()}},"mounted":function(){var o=this;this.$route.query.computerRoomType&&(this.type=this.$route.query.computerRoomType,this.getComputerRoomInfo()),this.$nextTick(function(){o.getComputerRoomInfo(),o.$httpt.get("machineRoomController.do?getCzMachineRooms&start=&pageSize=10000&department=&type=").then(function(t){var e=t.data;e.success?(o.allInfo=e.data.list,o.$route.query.hasInfoDepartment&&(o.computerRooms=o.allInfo.filter(function(t){return t.temp1===o.$route.query.hasInfoDepartment}),o.totalCount=o.computerRooms.length)):o.$Notice.error({"title":"获取机房信息失败"})})}),this.$bus.$on("updateComputerRoomInfo",function(){o.getComputerRoomInfo()})},"created":function(){this.$store.dispatch("czCloudInfo/getCloudInfo",{"vm":this})}},c={"render":function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{"staticClass":"computer-room"},[o("Card",[o("p",{"staticStyle":{"font-weight":"normal"},"attrs":{"slot":"title"},"slot":"title"},[e._v("机房信息维护")]),e._v(" "),o("AutoComplete",{"staticStyle":{"width":"300px"},"attrs":{"data":e.autoCompleteData,"filter-method":e.filterMethod,"transfer":!0,"placeholder":"搜索部门名，若存在会智能提示","clearable":"","icon":"ios-search"},"on":{"on-select":e.onSelect},"model":{"value":e.searchName,"callback":function(t){e.searchName=t},"expression":"searchName"}}),e._v(" "),o("Button",{"attrs":{"type":"primary","icon":"ios-search"},"on":{"click":e.search}},[e._v("搜索")]),e._v(" "),o("Alert",{"staticStyle":{"margin-top":"1rem"},"attrs":{"show-icon":"","closable":""}},[e._v("\n            现状说明\n            "),o("template",{"slot":"desc"},[e._v("\n                45个局委办自建了72个机房（总面积约3800平米），其中交通局8个；其次是住建局有6个；公安5个，供电公司4个；另有14个托管机房，30家单位租用了云服务；\n            ")])],2),e._v(" "),o("Alert",{"attrs":{"type":"warning","show-icon":"","closable":""}},[e._v("\n            存在问题\n            "),o("template",{"slot":"desc"},[e._v("\n                基础设施缺乏统筹规划，部分单位存在为1个应用建设1个机房的情况，投资分散，建设不规范，存在极大的安全生产隐患；\n                90%以上机房建设不规范，设计与运营管理比较落后，系统性、可用性、可扩展性不足，且与IT设备机架化的趋势脱节，存在较大的安全隐患，严重影响了功能的发挥；\n            ")])],2),e._v(" "),o("Table",{"staticStyle":{"margin-top":"1rem"},"attrs":{"border":"","columns":e.columns,"data":e.computerRooms}}),e._v(" "),o("Page",{"staticStyle":{"margin":".5rem 0 .5rem 0"},"attrs":{"total":e.totalCount,"show-sizer":""},"on":{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1),e._v(" "),o("computer-room-modal"),e._v(" "),o("computer-room-other-tip",{"attrs":{"computerRooms":e.computerRooms}})],1)},"staticRenderFns":[]};var m=o(3)(l,c,!1,function(t){o(1027)},"data-v-23d3b1e6",null);e["default"]=m.exports}});